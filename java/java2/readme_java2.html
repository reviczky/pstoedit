<!doctype html public "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<title>pstoedit -- Java 2 backend</title>
</head>
<body lang="en">

<h1>Readme for pstoedit -- Java 2 backend</h1>
<p align="center"><strong>17 April 2000</strong><br />
<strong>Wolfgang Glunz/Gisbert W. Selke</strong></p>

<h2>Contents</h2>

<ul>
<li><a href="#intro">Introduction</a></li>
<li><a href="#prep">Preparation</a></li>
<li><a href="#use">Use within HTML documents</a></li>
<li><a href="#viewing">Viewing the results</a></li>
<li><a href="#params">Optional parameters for the applet</a></li>
<li><a href="#bugs">Restrictions, limitations, further development</a></li>
<li><a href="#legal">Legal stuff</a></li>
<li><a href="#authors">Authors</a></li>
</ul>

<a name="intro"></a>
<h2>Introduction</h2>

<p>The file PSDrawing.java contains the Java 2 source code of the
classes needed to run the code generated by the -f java2 option of
pstoedit.</p>


<a name="prep"></a>
<h2>Preparation</h2>

<p>To use the output, do (using Java 2, i.e., at least JDK 1.3):
<pre>
  javac PSDrawing.java
</pre>
This needs done once only.</p>

<p><em>Note</em>: You may want to set the DEBUG flag near the beginning
of PSDrawing.java to 0 before compiling.</p>


<a name="use"></a>
<h2>Use within HTML documents</h2>

<h3>Conversion</h3>

<p>First, convert PostScript to Java and compile it (assuming you are
using the JDK):
<pre>
  pstoedit -f java2:myclass myfile.ps myclass.java
  javac myclass.java
</pre>
Alternatively, if you are using GSView, you can do the conversion via
the menu item <em>Edit</em> -&gt; <em>Convert to vector format...</em>.
You'll still have to compile it either via the JDK compiler or using
your favourite Java programming environment.</p>

<h3>Use within Netscape Navigator</h3>

<p>Then create an HTML document including code like this (this syntax is
for Netscape browsers only):
<pre>
  &lt;html&gt;
  &lt;head&gt;
  &lt;title&gt;PSDrawing generated by pstoedit&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;p&gt;This is the applet:&lt;/p&gt;
  &lt;embed type="application/x-java-applet;version=1.2.2"
      pluginspage="http://java.sun.com/products/plugin/1.2.2/plugin-install.html"
      code="myclass.class"
      option1="option_value_for_applet"
      width="700" height="500" align="baseline"&gt;
    &lt;noembed&gt;
      This applet needs support for at least Java 1.2.
    &lt;/noembed&gt;
  &lt;/embed&gt;
  &lt;/body&gt;
  &lt;/html&gt;
</pre></p>

<h3>Use within Internet Explorer</h3>

<p>Unfortunately, the syntax for the Internet Explorer is quite different:
<pre>
  &lt;html&gt;
  &lt;head&gt;
  &lt;title&gt;PSDrawing generated by pstoedit&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;p&gt;This is the applet:&lt;/p&gt;
  &lt;object classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93"
      width="700" height="500" align="baseline"
      codebase="http://java.sun.com/products/plugin/1.2.2/jinstall-1_2_2-win.cab#Version=1,2,2,0"&gt;
    &lt;param name="code"       value="myclass.class"&gt;
    &lt;param name="type"       value="application/x-java-applet;version=1.2.2"&gt;
    &lt;param name="option1"    value="option_value_for_applet"&gt;
    &lt;param name="scriptable" value="true"&gt;
    This applet needs support for at least Java 1.2.
  &lt;/object&gt;
  &lt;/body&gt;
  &lt;/html&gt;
</pre></p>

<h3>Use within either Netscape Navigator or Internet Explorer</h3>

<p>And if you want to cope with both, and hopefully others, you have to
go through considerable contortions:
<pre>
  &lt;html&gt;
  &lt;head&gt;
  &lt;title&gt;PSDrawing generated by pstoedit&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;p&gt;This is the applet:&lt;/p&gt;
  &lt;object classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93"
     width="700" height="500" align="baseline"
     codebase="http://java.sun.com/products/plugin/1.2.2/jinstall-1_2_2-win.cab#Version=1,2,2,0"&gt;
    &lt;param name="code"       value="myclass.class"&gt;
    &lt;param name="type"       value="application/x-java-applet;version=1.2.2"&gt;
    &lt;param name="option1"    value="option_value_for_applet"&gt;
    &lt;param name="scriptable" value="true"&gt;
  &lt;comment&gt;
  &lt;embed type="application/x-java-applet;version=1.2.2"
      pluginspage="http://java.sun.com/products/plugin/1.2.2/plugin-install.html"
      code="myclass.class"
      option1="option_value_for_applet"
      width="700" height="500" align="baseline"&gt;
    &lt;noembed&gt;
    &lt;/comment&gt;
      This applet needs support for at least Java 1.2.
    &lt;/noembed&gt;
  &lt;/embed&gt;
  &lt;/object&gt;
  &lt;/body&gt;
  &lt;/html&gt;
</pre></p>

<p><em>(Indeed, this is, strictly speaking, malformed syntax. So
there.)</em></p>

<h3>Use within other browsers</h3>

<p>If you want still other browsers to at least fail gracefully if they
can cope with neither form, you'll have to go to even greater lengths
involving JavaScript. Please refer to the documentation for Sun's HTML
converter available at
<a href="http://java.sun.com/products/plugin">http://java.sun.com/products/plugin</a>
which the above examples have been adapted from.</p>


<a name="viewing"></a>
<h2>Viewing the results</h2>

<p>Then launch a web browser for which a Java 2 plugin exists. If the
plugin is not installed, the above code will get it from Sun's site
(given that an Internet connection is accessible). Note that currently
(early 2000), for most browsers, built-in support for Java 2 is not
sufficient, so a simple &lt;applet&gt; tag will not do any longer. If
you want to be free from this restriction, use the <code>-f java</code>
option, which produces Java 1 code, but which has some other
limitations.</p>

<p>The applet supports panning by pressing the primary mouse key and
dragging.</p>

<p>For testing purposes, using the appletviewer (which comes with the
JDK) may be faster than employing a full-fledged browser.</p>


<a name="params"></a>
<h2>Optional parameters for the applet</h2>

<p>Currently there are 4 optional parameters for the applet.</p>

<ul>
<li>The first is called <code>zoom</code>. If it is present in the HTML
code for the specification of the applet, the user will be presented
with <em>zoom in</em> and <em>zoom out</em> buttons. If it starts with a
valid positive number, this will be the initial zoom factor at which
the applet is displayed. The default value is 1. If it contains another
valid number greater than 1, separated by a blank, this will be the
zoom step which is applied whenever the zoom-in button is pressed. The
default is 1.2.</li>

<li>The next parameter is <code>rotate</code>. If it is present in the
HTML code for the specification of the applet, the user will be
presented with a <em>rotate</em> button. If it starts with a valid
number, this will be the initial rotation (measured counter-clockwise
in degrees) at which the applet is displayed. The default value is 0.
If it contains another valid number, separated by a blank, this will be
the increment in the angle whenever the <em>rotate</em> button is
pressed. The default is 90. -- This whole feature is mainly useful for
viewing graphics in landscape or skyscape orientation rather than
portrait. Note that there is no <em>rotate clockwise</em> button.</li>

<li>The third parameter is <code>offset</code>. Two valid numbers may be
supplied (default: 0 0) which specify an initial
<code>x</code>/<code>y</code> shift for the display.</li>

<li>Finally, for multi-page data, the starting page to be displayed can
be specified using the parameter <code>page</code>, numbered from 1.
Usually, the first page is chosen. Note that the user is offered
<em>previous</em>/<em>next</em> buttons automatically whenever more
than one page is present. Neither does this depend on the presence of
the <code>page</code> parameter, nor can it be switched off via a
parameter.</li>
</ul>

<h3>Examples:</h3>

<ul>
<li>Netscape Navigator:
<pre>
  zoom="yes"   or    zoom="0.5 1.4" within the &lt;embed ...&gt; tag
  rotate="-90 45"
  offset="-100 200"
  page="3"
</pre></li>
<li>Internet Explorer:
<pre>
  &lt;param name="zoom" value="yes"&gt;  or
  &lt;param name="zoom" value="0.5 1.4"&gt;
  &lt;param name="rotate" value="-90 45"&gt;
  &lt;param name="offset" value="-100 200"&gt;
  &lt;param name="page" value="3"&gt;
</pre></li>
</ul>


<a name="bugs"></a>
<h2>Restrictions, limitations, further development</h2>

<p>The classes provide limited functionality at the moment. It is work
in progress. Topics that need to be addressed include:</p>

<ul>
<li>bitmap images are currently displayed in grayscale only; in any
    case, support is still very sketchy. Do not rely on this to
    work yet.</li>
<li>not all types of bitmaps (e.g., CMYK colour model) are supported</li>
<li>add printing</li>
<li>add applet parameter for background colour?</li>
<li>add support for use as stand-alone application (rather than applet)</li>
<li>add proper javadoc comments to PSDrawing.java</li>
</ul>

<p>Since the whole thing is pretty much alpha, I'd appreciate bug
reports and suggestions on the Java 2 backend. Mail to <a
href="mailto:gisbert@tapirsoft.de">Gisbert</a>.
(Please, do not ask for extensions of the Java 1.x backend. That
one is as good as it gets. Please, do not ask me (Gisbert) about
functionality of pstoedit in general. I don't even know how it works its
magic.)</p>


<a name="legal"></a>
<h2>Legal stuff</h2>

<p>Finally, the source code is covered by the GPL the same way as
pstoedit. It is copyright &copy; 1998-2000 Wolfgang Glunz and Gisbert W.
Selke. This does not include the code generated by pstoedit! That
code is free without any restrictions. See the file Copying in the main
directory of the pstoedit distribution for the details of the GPL.</p>

<p>The icons for zoom-in and zoom-out have been nicked from the
fine product
<a href="http://www.cs.wisc.edu/~ghost/">GSView</a> by Russell
Lang/Ghostgum.</p>


<a name="authors"></a>
<h2>Authors</h2>

<p>pstoedit was created and is maintained by
<a href="mailto:wglunz@geocities.com">Wolfgang Glunz</a>.<br />
Java support was created by Wolfgang, too. It is currently under
development by <a href="mailto:gisbert@tapirsoft.de">Gisbert W.
Selke</a> of <a href="http://www.tapirsoft.de">TapirSoft Gisbert
&amp; Harald Selke GbR</a>.</p>

</body>
</html>
